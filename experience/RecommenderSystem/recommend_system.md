# 简介
推荐系统(recommender system)是目前十分流行的信息流分发系统。无论是在电商、资讯、短视频社区、微博等应用上，都有推荐系统的影子。它可以在信息爆炸的时代，帮助用户进行信息筛选，快速找到感兴趣的内容。

## 推荐系统工程
推荐系统工程:
- 推荐系统存储: 用户行为日志存储
- 实验平台: A/B 实验、MAB 实验、BO 实验、Interleaving 实验、客户端实验、社交网络实验、双边实验.
- feed 流


## 概念
传统的推荐系统流程中包括召回、粗排、精排、重排。
召回: 召回是推荐系统的第一阶段，主要根据用户和商品部分的特征，从海量的物品库里，快速找回一小部分用户潜在感兴趣的物品，然后交给排序环节。召回需要在海量的物品库里，快速找到一小部分用户潜在感兴趣的物品，这部分需要处理的数据量非常大，速度要求快，所以使用的策略、模型和特征都不能太复杂。常用的召回方法如下:
- 基于内容的召回: 根据 item 的相似性推荐用户喜欢的类似的 item
- 协同过滤: 同时使用 query 和 item 之间的相似性进行推荐
- 基于 FM 模型召回: 基于矩阵分解的推荐算法，核心是二阶特征组合
- 基于深度神经网络的方法: 利用深度神经网络生成相应的候选集

曝光过滤: 将历史曝光给用户的 item 不再重复的进行曝光，以及已经曝光过的商品的高相似商品也进行过滤。

AUC(Area Under Curve): 定义为 ROC 曲线下的面积。衡量学习七优劣的一种性能指标。
ROC(receiver operating characteristic curve): ROC 曲线，又称为感受性曲线。

feed流: feed 是将用户主动订阅的若干消息源组合再一起形成内容聚合器，帮助用户持续地获取最新的订阅源内容。feed 流即持续更新并呈现给用户内容的信息流。在信息学里，feed 是一个信息单元，比如一条朋友圈状态、一条微博、一条咨询或一条短视频等，所以 feed 流就是不停更新的信息单元。当前流行的 feed 流产品有微博、朋友圈、头条资讯、快手、抖音等，而私信、通知等也是变种的 feed 流。

LR(logistic regression 逻辑回归): 是一种广义线性回归分析模型，常用语数据挖掘、疾病诊断、经济预测等领域。

### 推荐系统流程
推荐系统在返回给用户数据列表时，大致的流程是: 用户来到推荐页，根据不同的用户数据、物品数据、所处的上下文信息等，从海量的候选物品集合中，分别经历召回层、排序层、重排序层，拉回 K 个用户最有可能喜欢的物品(泛指商品、咨询、视频、内容等)，形成最终的推荐列表。

### feed 流系统
feed 流即信息流，常见的 feed 流有手淘商品列表、微信朋友圈、微博、头条、抖音等。

## Spark
Apache Spark 是一个专门为大规模数据处理设计的快速通用的计算引擎，是 UC Berkeley AMP lab 开源的类 Hadoop MapReduce 的通用并行框架。Spark 启用了内存分布数据集，除了能提供交互查询外，还可以优化迭代工作负载。它可以用来构建大型的、低延迟的数据分析应用程序。
Spark 主要有以下特点:
- 高级 API 剥离对集群本身的关注，可以专注于应用要做的计算本身。
- 速度很快，支持交互式计算和复杂算法。
- 通用引擎，可以用来完成各种各样的运算，包括 SQL 查询、文本处理、机器学习等。

## 常见问题
基础概念
1. 偏差与方差
2. 随机森林
3. LightGBM
4. AdaBoost
5. 梯度下降方法
6. 假设检验的两类错误
7. RMSE、MSE、MAE
8. AUC 是如何实现的，它对正负样本采样是否敏感?
9. 分类决策树的指标有哪些?
10. 决策树怎么构造？
11. 用户/项目相似度衡量指标，特征相关性衡量指标。

工程问题
1. 线下提升线上效果为什么不好？
2. 多路召回的作用
3. 推荐系统的特征工程有哪些？怎么做？
4. 如何解决推荐系统重复推荐用户已经处理过的 item 的问题？
5. 推荐系统召回阶段如何实现热门 item 的打压？
6. user/item 冷启动怎么解决？
7. 协同过滤优缺点？
8. LR 中连续特征为什么要做离散化？

## a/b 实验平台
a/b 实验平台，提供一个可以方便的使用控制变量的手段同时进行多种功能改进的效果对比。

### google 分层实验论文
目前主流的分层实验是基于 google 的分层实验论文 《Overlapping Experiment infrastructure- More, Better, Faster Experimentation》 
domain: 域指流量的一个划分
layer: 层指系统参数的子集
experiment: 指在一个流量划分上，进行 0 或多个参数的修改，最后改变的过程
发布层(launch layers): 对参数的一个独立划分，总是在默认域中

## 参考
1. [【知乎】深入理解推荐系统：召回](https://zhuanlan.zhihu.com/p/115690499)
2. [今日头条推荐算法原理首公开，头条首席算法架构师带来详细解读](https://www.leiphone.com/category/yanxishe/XlIxFZ5W3j8MvaEL.html)
3. [知乎: 推荐系统面经48题总结版（完）](https://zhuanlan.zhihu.com/p/422464069)
4. [知乎: 线下AUC提升为什么不能带来线上效果提升?](https://zhuanlan.zhihu.com/p/58152702)
5. [推荐系统的架构](https://kb.cnblogs.com/page/662938/)
6. [深入理解：推荐系统中的召回与排序（一）](http://www.woshipm.com/data-analysis/4542994.html)
7. [Feed流系统设计](https://www.jianshu.com/p/f8f0930f9d68)
8. [【分层实验框架】Google 重叠实验框架：更多，更好，更快地实验](https://logosty.github.io/2019/11/22/%E5%88%86%E5%B1%82%E5%AE%9E%E9%AA%8C%E6%A1%86%E6%9E%B6-Google-%E9%87%8D%E5%8F%A0%E5%AE%9E%E9%AA%8C%E6%A1%86%E6%9E%B6-%E6%9B%B4%E5%A4%9A-%E6%9B%B4%E5%A5%BD-%E6%9B%B4%E5%BF%AB%E5%9C%B0%E5%AE%9E%E9%AA%8C.html)
9. [【阿里云社区】10分钟搞懂分层实验原理](https://developer.aliyun.com/article/5837)
10. [深入理解推荐系统：召回](https://zhuanlan.zhihu.com/p/115690499)
11. [亿级用户，腾讯看点信息流推荐系统的架构挑战](https://cloud.tencent.com/developer/article/1722298)
12. [Apache Spark](https://baike.baidu.com/item/Apache%20Spark/59924870?fromtitle=SPARK&fromid=2229312)