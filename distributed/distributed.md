# 简介
分布式相关的知识。

## sonwflake
sonwflake 是 Twitter 开源的分布式 ID 生成算法，结果是一个 long 型的 ID。它的核心思想是，使用 41 bit 作为毫秒数，10 bit 作为机器的 ID ( 5 bit 是数据中心, 5 bit 是机器 ID), 12 bit 作为毫秒内的流水号(意味着每个节点在每毫秒可以生产 4096 个 ID)，最后有一个符号位 0。

## 分布式锁
在分布式模型中，为了确保数据在某一时刻只有一个进程操作，可以借助分布式锁完成。
- 基于 Redis 的分布式锁: 主要基于 redis 的 setnx() 和 expire() 方法实现分布式锁。
- 基于 Zookeeper 的分布式锁: 利用临时节点与 watch 机制。每个锁占用一个临时节点，需要获取锁时创建一个临时节点，成功代表获取锁成功，失败则用 watch 节点，删除后再争取锁。但要考虑羊群效应。