# 简介
关系型数据库，常用的关系型数据库是 MySQL。对于 MySQL 的一些基本原理、性能、优化等都是需要掌握的。

## 知识点
MySQL 的主要知识包括索引及其原理、索引优化、事务、锁、分布式一致性。
### 索引
聚蔟索引: innodb 使用聚簇索引，叶子节点上存放了整行的数据。相对于非聚簇索引，查询效率更高，不用二次回表查询。但是相对的插入新值等会较慢。
非聚蔟索引: MyISAM 使用的是非聚簇索引，叶子节点仅仅记录了索引及对应的数据位置，需要再一次 I/O 查到行数据。
覆盖索引: 指的索引的叶子节点已经包含了需要查询的数据，不用根据主键进行二次查询。设计 SQL 语句时尽量使用覆盖索引将更加高效。
B+ 树: MySQL 的索引结构。由于 MySQL 的数据及索引存储于磁盘中，其主要的性能瓶颈在于磁盘 I/O。MySQL 使用 B+ 树将数据存储在叶子节点中，而每个非叶子节点可以存储更多的索引键，这样可以让索引 B+ 树的高度更短，也就可以以更少的磁盘 I/O 次数查找到指定数据。
B 树: B 树即二叉搜索树，数据的查询效率是 log2(n)。
索引优化: 索引优化可以提升查询效率，主要编写高效的 SQL 语句。如在 select、group by、order by、join 等操作列上使用索引，尽量使用批量插入数据等。

### 事务
事务具有 ACID 特性。
可以按照使用场景的将 MySQL 事务的隔离级别分为 RU、RC、RR、S，它们分别在数据一致性和性能上有所区别。
锁是保证数据一致性的重要方法，MySQL 在数据一致性及性能平衡上有这些方法: MVCC 、乐观锁、悲观锁、行锁、表锁

### 分布式
在分布式系统中，基本涉及到 Paxos 算法思想处理一致性，工程实践上 Raft、Zab 等也应用很广泛。

## 性能
MySQL 的性能根据磁盘、内存、CPU 等配置不同会有所差异，一般写性能在 1000/s 级别，而读性能在 10000/s 级别。所以在方案设计中，要充分考虑到数据库的写入能力，如在订单、支付等的需求中，需要考虑削峰、一致性等。而在数据读取上，要避免慢 SQL 查询，同时在高并发场景中，要考虑缓存优化、分库分表等方式避免超过 DB 的读性能瓶颈。

## 题目
1. MySQL innodb 的行级锁实现方式，如何避免表锁？
2. MySQL 的事务是如何实现的？

## 参考
1. [MySQL索引（二）B+树在磁盘中的存储](https://juejin.cn/post/6844903856388718606)
2. []()